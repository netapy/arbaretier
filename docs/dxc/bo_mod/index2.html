<!doctype html>
<html lang="en" class="h-100">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
  <meta name="generator" content="Jekyll v3.8.6">
  <title>Mod√©rateur Monenfant.fr</title>

  <link rel="canonical" href="https://getbootstrap.com/docs/4.4/examples/sticky-footer-navbar/">

  <!-- Favicons -->
  <meta name="theme-color" content="#563d7c">
  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
  </script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous">
  </script>

  <style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }

    .textFieldCnaf {
      padding: 5px;
      border-width: 0px;
      border-bottom-width: 3px;
      border-color: #8091af;
    }

    .rectTextCnaf {
      color: white;
      background-color: #8091af;
      padding: 8px 10px;
    }

    th {
      font-weight: normal !important;
      vertical-align: top !important;
      font-size: 16px !important;
    }

    .modLink {
      color: #007bff;
      text-decoration: underline;
      cursor: pointer;
    }
  </style>
</head>

<body class="d-flex flex-column h-100">
  <header>
    <!-- Fixed navbar -->
    <nav class="navbar navbar-expand-md" style=" background-color: #f1f0f0;">
      <img src="https://upload.wikimedia.org/wikipedia/fr/c/cb/Caisse_d_allocations_familiales_france_logo.svg"
        style="width: 100px; padding:20px">
      <a class="navbar-brand" style="color:black" href="#">Moderateur</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse"
        aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div style="position: absolute; right: 10px;"><button style="width: 180px;" onclick="resetData();document.location.reload();
          this.innerHTML='R√©initialis√© ! üëç';this.disabled=true;">R√©initialiser la d√©mo</button></div>
      <div class="collapse navbar-collapse" id="navbarCollapse">
        <div class="navbar-nav mr-auto">
        </div>
        <form class="form-inline mt-2 mt-md-0">
          <!-- <input class="form-control mr-sm-2" type="text" placeholder="Rechercher" aria-label="Search">
          <button class="btn my-2 my-sm-0" type="submit">üîé</button> -->
        </form>
      </div>
    </nav>
  </header>

  <!-- Begin page content -->

  <main role="main" class="flex-shrink-0" style="padding:30px 0px; background-color: #f1f0f0;">
    <div class="container" style="background-color: white; padding:30px 5px;">
      <div class="container">
        <h4 style="margin-bottom: 60px;">Mod√©rateur des inscriptions des assistants maternels</h4>
        <h5 style="margin-bottom: 30px;">Filtrer par : </h5>
        <hr>
        <div class="row" style="margin-bottom: 30px;">
          <div class="col-6 text-center">
            <span class="rectTextCnaf">Nom</span>
            <input id="valueFiltreNom" type="text" class="textFieldCnaf" placeholder="" style="width: 80%;">
          </div>
          <div class="col-6 text-center">
            <span class="rectTextCnaf">Code postal</span>
            <input type="text" id="valueFiltreCp" class="textFieldCnaf" placeholder="" style="width: 60%;">
          </div>
        </div>
        <div class="row">
          <div class="col-6 text-center">
            <span>Type de demande : </span>
            <select id="valueFiltreTypeDem" class="textFieldCnaf" style="padding-right: 20px;">
              <option selected>Tout</option>
              <option>Inscription</option>
              <option>Renouvellement</option>
            </select>
          </div>
          <div class="col-6 text-center">
            <span>Statut de la demande : </span>
            <select id="valueFiltreStatDem" class="textFieldCnaf">
              <option selected>Tout</option>
              <option>Rejet√©</option>
              <option>En attente de nouveaux √©l√©ments</option>
              <option>En attente de traitement</option>
              <option>En cours de traitement</option>
            </select>
          </div>
        </div>
        <div class="col-md-12 text-center">
          <button class="btn btn-primary"
            style="padding: 6px 20px; font-size: 16px; background-color: #5b84f7; margin-top: 20px;"
            onclick="filtreTableau();">Filtrer</button>
        </div>
      </div>
      <br> <br>


      <div class="container">
        <table id="tableau" class="table table-bordered" style="font-size: 14px;">
          <thead>
            <tr>
              <th> N¬∞ de demande <span style="cursor: pointer; font-size: 10px; white-space: nowrap;">&#8693;</span>
              </th>
              <th>Pr√©nom <span style="cursor: pointer; font-size: 10px; white-space: nowrap;">&#8693;</span></th>
              <th>Nom <span style="cursor: pointer; font-size: 10px; white-space: nowrap;">&#8693;</span></th>
              <th>Code postal <span style="cursor: pointer; font-size: 10px; white-space: nowrap;">&#8693;</span></th>
              <th>Date de demande <span style="cursor: pointer; font-size: 10px; white-space: nowrap;">&#8693;</span>
              </th>
              <th>Date de dernier changement de statut <span
                  style="cursor: pointer; font-size: 10px; white-space: nowrap;">&#8693;</span></th>
              <th>Type <span style="cursor: pointer; font-size: 10px; white-space: nowrap;">&#8693;</span></th>
              <th>Statut <span style="cursor: pointer; font-size: 10px; white-space: nowrap;">&#8693;</span></th>
              <th>Demande trait√©e par <span
                  style="cursor: pointer; font-size: 10px; white-space: nowrap;">&#8693;</span>
              </th>
              <th>Demande trait√©e le <span style="cursor: pointer; font-size: 10px; white-space: nowrap;">&#8693;</span>
              </th>
              <th>Traitement <span style="cursor: pointer; font-size: 10px; white-space: nowrap;">&#8693;</span>
              </th>
            </tr>
          </thead>
          <tbody id="CorpsTableauDemandes">

          </tbody>
        </table>
      </div>
    </div>


    <script>
      let dataTableau = JSON.parse(localStorage.getItem("dataDemandes"));

      let tableau = document.querySelector("#CorpsTableauDemandes")
      for (ii in dataTableau) {
        let dataTableauHTML = "<tr id='dem" + String(ii) + "'>";
        for (iii in dataTableau[ii]["ligne"]) {
          dataTableauHTML += "<td>" + dataTableau[ii]["ligne"][iii] + "</td>"
        };
        dataTableauHTML += "</tr>"
        tableau.insertAdjacentHTML("beforeend", dataTableauHTML);
        dataTableauHTML = "<tr>";
      }

      const filtreTableau = () => {
        let filterNom = document.querySelector("#valueFiltreNom").value.toUpperCase();
        let filterCp = document.querySelector("#valueFiltreCp").value;
        let filterTypeDem = document.querySelector("#valueFiltreTypeDem").value.toUpperCase();
        let filterStatDem = document.querySelector("#valueFiltreStatDem").value.toUpperCase();
        let table = document.getElementById("tableau");
        console.log(filterStatDem)
        let tr = table.getElementsByTagName("tr");
        for (i = 1; i < tr.length; i++) {
          tr[i].style.display = "none";
          td = tr[i].getElementsByTagName("td");
          let jusquaQuatre = 0;
          //nom
          if (td[1].innerHTML.toUpperCase().indexOf(filterNom) > -1 || td[2].innerHTML.toUpperCase().indexOf(
              filterNom) > -1 || filterNom == "") {
            jusquaQuatre += 1;
          }
          //CP
          if (td[3].innerHTML.toUpperCase().indexOf(filterCp) > -1 || filterCp == "") {
            jusquaQuatre += 1;
          }
          //typeDem
          if (td[6].innerHTML.toUpperCase().indexOf(filterTypeDem) > -1 || filterTypeDem == "TOUT") {
            jusquaQuatre += 1;
          }
          //StatutDem
          console.log(td[7].innerHTML.toUpperCase())
          if (td[7].innerHTML.toUpperCase().indexOf(filterStatDem) > -1 || filterStatDem == "TOUT") {
            jusquaQuatre += 1;
          }
          if (jusquaQuatre == 4) {
            tr[i].style.display = "";
          }

        }
      };

      const goPageSuiv = (elem) => {
        localStorage.setItem('nDemande', elem.parentElement.parentElement.id.replace("dem", ""));
        localStorage.setItem('dataDemandes', JSON.stringify(dataTableau));
        window.location.href = 'moderation.html';
      };
    </script>
    <script src="data.js"></script>

  </main>



  <footer class="footer mt-auto py-3">
    <div class="container">
      <span class="text-muted">Maquette DXC √† usage interne.</span>
    </div>
  </footer>

</body>

</html>